import{c,u as B,j as e,S as I,X as T,L as E,r as g,s as v,t as z,A as L,m as C,a as q,U as W,M as U}from"./index-BgtLIF6L.js";import{u as F}from"./useAuth-BroS41fB.js";import{B as O}from"./building-2-DUyhWP1J.js";import{I as H}from"./image-Cp5bxKh3.js";import{a as V,C as P}from"./chevron-right-C2sZLmp-.js";import{H as G}from"./house-CE1JIjXO.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],S=c("bell",Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],J=c("book-open",Y);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],X=c("calendar-check",Z);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],ee=c("check-check",K);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],_=c("clipboard-list",ae);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],se=c("ellipsis",te);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ie=c("external-link",ne);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],R=c("layout-dashboard",oe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],$=c("log-out",re);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],D=c("package",le);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],de=c("search",ce);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],me=c("settings",pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],xe=c("trending-up",he);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ue=c("user-plus",ge);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],be=c("wifi-off",fe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ke=c("wifi",ye),ve=[{id:"dashboard",label:"Overview",icon:R,path:"/admin/dashboard"},{id:"analytics",label:"Analytics",icon:xe,path:"/admin/analytics"},{id:"notifications",label:"Notifications",icon:S,path:"/admin/notifications"},{id:"packages",label:"Packages",icon:D,path:"/admin/packages"},{id:"facilities",label:"Facilities",icon:O,path:"/admin/facilities"},{id:"gallery",label:"Gallery",icon:H,path:"/admin/gallery"},{id:"availability",label:"Availability",icon:X,path:"/admin/availability"},{id:"bookings",label:"Bookings",icon:J,path:"/admin/bookings"},{id:"requests",label:"Admin Requests",icon:ue,path:"/admin/requests"}];function _e({currentPage:w,isOpen:n,onClose:h,isCollapsed:i=!1,onToggleCollapse:j}){const u=B(),{supabase:b}=F(),x=async()=>{if(confirm("Are you sure you want to logout?"))try{await b.auth.signOut(),u("/admin/login")}catch(t){console.error("Logout error:",t)}};return e.jsxs(e.Fragment,{children:[n&&e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-40 lg:hidden",onClick:h}),e.jsx("aside",{className:`
          admin-sidebar
          ${n?"open":""}
          ${i?"collapsed":""}
        `,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"admin-sidebar-logo",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center sidebar-logo-icon",style:{background:"linear-gradient(135deg, #B6F500, #A4DD00)",boxShadow:"0 4px 12px rgba(182, 245, 0, 0.25)"},children:e.jsx(I,{size:24,style:{color:"#2A2A2A"}})}),e.jsxs("div",{className:"flex-1 sidebar-logo-text-wrapper",children:[e.jsx("h1",{className:"admin-sidebar-logo-text",children:"Dream Avenue"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#A4DD00",marginTop:"2px",fontWeight:"500"},children:"Admin Dashboard"})]}),e.jsx("button",{onClick:h,className:"lg:hidden w-8 h-8 flex items-center justify-center rounded-lg transition-colors",style:{color:"#666666"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(255, 107, 107, 0.1)",t.currentTarget.style.color="#FF6B6B"},onMouseLeave:t=>{t.currentTarget.style.background="transparent",t.currentTarget.style.color="#666666"},children:e.jsx(T,{size:20})})]}),e.jsx("nav",{className:"admin-sidebar-nav overflow-y-auto",children:ve.map(t=>{const a=t.icon,N=w===t.id;return e.jsxs(E,{to:t.path,className:`admin-nav-link ${N?"active":""}`,onClick:()=>h(),title:i?t.label:void 0,children:[e.jsx(a,{size:20}),e.jsx("span",{className:"nav-link-text",children:t.label})]},t.id)})}),e.jsxs("div",{className:"mt-auto p-4 border-t sidebar-footer",style:{borderColor:"#E6E6E6"},children:[j&&e.jsxs("button",{onClick:j,className:"admin-nav-link mb-2 hidden lg:flex sidebar-collapse-toggle",title:i?"Expand Sidebar":"Collapse Sidebar",style:{background:"rgba(182, 245, 0, 0.08)",justifyContent:i?"center":"flex-start"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(182, 245, 0, 0.15)"},onMouseLeave:t=>{t.currentTarget.style.background="rgba(182, 245, 0, 0.08)"},children:[i?e.jsx(V,{size:20}):e.jsx(P,{size:20}),e.jsx("span",{className:"nav-link-text",children:i?"":"Collapse"})]}),e.jsxs(E,{to:"/",className:"admin-nav-link mb-2",title:i?"Back to Website":void 0,children:[e.jsx(G,{size:20}),e.jsx("span",{className:"nav-link-text",children:"Back to Website"})]}),e.jsxs("button",{onClick:x,className:"admin-nav-link w-full",title:i?"Logout":void 0,style:{color:"#FF6B6B"},onMouseEnter:t=>{t.currentTarget.style.background="rgba(255, 107, 107, 0.1)"},onMouseLeave:t=>{t.currentTarget.style.background="transparent"},children:[e.jsx($,{size:20}),e.jsx("span",{className:"nav-link-text",children:"Logout"})]})]})]})})]})}function we(){const[w,n]=g.useState([]),[h,i]=g.useState(0),[j,u]=g.useState(!0),[b,x]=g.useState(!1),t=g.useCallback(async()=>{try{const{data:{user:o}}=await v.auth.getUser();if(!o){console.log("ðŸ“¢ No user authenticated"),n([]),i(0),u(!1);return}const{data:r}=await v.from("profiles").select("role").eq("id",o.id).maybeSingle();if(!(r?.role==="admin")){console.log("ðŸ“¢ User is not admin - notifications disabled"),n([]),i(0),u(!1);return}const{data:d,error:k}=await v.from("notifications").select("*").order("created_at",{ascending:!1}).limit(50);if(k){console.error("Error fetching notifications:",k);return}n(d||[]),i(d?.filter(s=>!s.read).length||0),u(!1)}catch(o){console.error("Error in fetchNotifications:",o),u(!1)}},[]),a=g.useCallback(async o=>{try{const{error:r}=await v.from("notifications").update({read:!0}).eq("id",o);if(r)throw r;n(m=>m.map(d=>d.id===o?{...d,read:!0}:d)),i(m=>Math.max(0,m-1))}catch(r){console.error("Error marking notification as read:",r)}},[]),N=g.useCallback(async()=>{try{const{data:{user:o}}=await v.auth.getUser();if(!o)return;const{error:r}=await v.from("notifications").update({read:!0}).eq("read",!1);if(r)throw r;n(m=>m.map(d=>({...d,read:!0}))),i(0),z.success("All notifications marked as read")}catch(o){console.error("Error marking all as read:",o),z.error("Failed to mark all as read")}},[]),f=g.useCallback(async o=>{try{const{error:r}=await v.from("notifications").delete().eq("id",o);if(r)throw r;n(m=>{const d=m.find(k=>k.id===o);return d&&!d.read&&i(k=>Math.max(0,k-1)),m.filter(k=>k.id!==o)})}catch(r){console.error("Error deleting notification:",r)}},[]),y=g.useCallback(async()=>{await t()},[t]);return g.useEffect(()=>{let o;return(async()=>{const{data:{user:m}}=await v.auth.getUser();if(!m){u(!1);return}const{data:d}=await v.from("profiles").select("role").eq("id",m.id).maybeSingle();if(!(d?.role==="admin")){u(!1);return}await t(),console.log("ðŸ“¢ Setting up real-time notifications..."),o=v.channel("admin-notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications"},s=>{console.log("ðŸ“¢ New notification received:",s.new);const p=s.new;n(l=>[p,...l]),p.read||i(l=>l+1);const M={booking:"ðŸ“…",system:"âš™ï¸",admin:"ðŸ‘¤",info:"â„¹ï¸"}[p.type]||"ðŸ””";z.success(`${M} ${p.title}`,{description:p.message,duration:5e3});try{const l=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBDGH0fPTgjMGHm7A7+OZURE=");l.volume=.3,l.play().catch(()=>{})}catch{}}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications"},s=>{console.log("ðŸ“¢ Notification updated:",s.new);const p=s.new;n(l=>l.map(A=>A.id===p.id?p:A));const M=w.find(l=>l.id===p.id);M&&!M.read&&p.read&&i(l=>Math.max(0,l-1))}).on("postgres_changes",{event:"DELETE",schema:"public",table:"notifications"},s=>{console.log("ðŸ“¢ Notification deleted:",s.old);const p=s.old.id;n(M=>{const l=M.find(A=>A.id===p);return l&&!l.read&&i(A=>Math.max(0,A-1)),M.filter(A=>A.id!==p)})}).subscribe(s=>{s==="SUBSCRIBED"?(console.log("âœ… Connected to notifications channel"),x(!0)):s==="CHANNEL_ERROR"?(console.error("âŒ Error connecting to notifications channel"),x(!1)):s==="TIMED_OUT"&&(console.error("â±ï¸ Connection timed out"),x(!1))})})(),()=>{o&&(console.log("ðŸ”• Unsubscribing from notifications"),v.removeChannel(o),x(!1))}},[t]),{notifications:w,unreadCount:h,isLoading:j,isRealtimeConnected:b,markAsRead:a,markAllAsRead:N,deleteNotification:f,refreshNotifications:y}}function je({isOpen:w,notifications:n,unreadCount:h,isRealtimeConnected:i,onClose:j,onMarkAllRead:u,onMarkAsRead:b,onViewAll:x}){const t=a=>{const N=new Date(a),y=Math.floor((new Date().getTime()-N.getTime())/1e3);return y<60?"Just now":y<3600?`${Math.floor(y/60)}m ago`:y<86400?`${Math.floor(y/3600)}h ago`:`${Math.floor(y/86400)}d ago`};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        @media (max-width: 768px) {
          .notification-dropdown-panel {
            position: fixed !important;
            left: 8px !important;
            right: 8px !important;
            top: 72px !important;
          }
        }
        @media (max-width: 480px) {
          .notification-dropdown-panel {
            left: 4px !important;
            right: 4px !important;
            top: 68px !important;
          }
        }
      `}),e.jsx(L,{children:w&&e.jsxs(e.Fragment,{children:[e.jsx(C.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:j,style:{background:"rgba(0, 0, 0, 0.1)"}}),e.jsxs(C.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},className:"notification-dropdown-panel",style:{position:"absolute",right:"0",top:"calc(100% + 12px)",width:"100vw",maxWidth:"420px",minWidth:"320px",maxHeight:"85vh",background:"#FAF9F6",borderRadius:"16px",boxShadow:"0 12px 40px rgba(224, 192, 151, 0.25), 0 0 0 1px rgba(182, 245, 0, 0.15)",overflow:"hidden",zIndex:50,border:"2px solid rgba(224, 192, 151, 0.3)"},children:[e.jsxs("div",{style:{padding:"16px 16px",borderBottom:"2px solid rgba(182, 245, 0, 0.15)",background:"linear-gradient(135deg, rgba(182, 245, 0, 0.08), rgba(224, 192, 151, 0.08))"},className:"notification-header",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"10px",background:"linear-gradient(135deg, #B6F500, #98CD00)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(182, 245, 0, 0.3)",flexShrink:0},className:"md:w-10 md:h-10",children:e.jsx(S,{size:18,style:{color:"#1a1a1a"},className:"md:w-5 md:h-5"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{style:{fontWeight:"700",color:"#2A2A2A",fontSize:"clamp(0.938rem, 2vw, 1.125rem)"},children:"Notifications"}),e.jsx("p",{style:{fontSize:"clamp(0.688rem, 1.5vw, 0.75rem)",color:"#666666",marginTop:"2px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:n.length===0?"All caught up!":`${n.length} notification${n.length!==1?"s":""}`})]})]}),e.jsx("button",{onClick:j,style:{width:"32px",height:"32px",borderRadius:"8px",background:"rgba(0, 0, 0, 0.05)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s",flexShrink:0,marginLeft:"8px"},onMouseEnter:a=>{a.currentTarget.style.background="rgba(231, 76, 60, 0.15)"},onMouseLeave:a=>{a.currentTarget.style.background="rgba(0, 0, 0, 0.05)"},children:e.jsx(T,{size:16,style:{color:"#666666"}})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:i?e.jsxs(e.Fragment,{children:[e.jsx(ke,{size:12,style:{color:"#10B981"},className:"sm:w-3.5 sm:h-3.5"}),e.jsx("span",{style:{fontSize:"clamp(0.625rem, 1.5vw, 0.7rem)",color:"#10B981",fontWeight:"500"},children:"Live"})]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{size:12,style:{color:"#999999"},className:"sm:w-3.5 sm:h-3.5"}),e.jsx("span",{style:{fontSize:"clamp(0.625rem, 1.5vw, 0.7rem)",color:"#999999",fontWeight:"500"},children:"Offline"})]})}),h>0&&e.jsxs("button",{onClick:u,style:{fontSize:"clamp(0.625rem, 1.5vw, 0.7rem)",color:"#E0C097",fontWeight:"600",background:"transparent",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",marginLeft:"auto",padding:"4px 6px",borderRadius:"6px",transition:"all 0.2s",whiteSpace:"nowrap",flexShrink:0},className:"sm:px-2",onMouseEnter:a=>{a.currentTarget.style.background="rgba(224, 192, 151, 0.15)"},onMouseLeave:a=>{a.currentTarget.style.background="transparent"},children:[e.jsx(ee,{size:11,className:"sm:w-3 sm:h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Mark All"}),e.jsx("span",{className:"inline sm:hidden",children:"All"})]})]})]}),e.jsx("div",{style:{maxHeight:"calc(85vh - 220px)",overflowY:"auto",scrollbarWidth:"thin",scrollbarColor:"rgba(182, 245, 0, 0.3) transparent"},className:"notification-list",children:n.length===0?e.jsxs("div",{style:{padding:"clamp(40px, 8vw, 60px) clamp(16px, 4vw, 24px)",textAlign:"center",color:"#999999"},children:[e.jsx("div",{style:{width:"clamp(60px, 15vw, 80px)",height:"clamp(60px, 15vw, 80px)",margin:"0 auto 20px",borderRadius:"50%",background:"linear-gradient(135deg, rgba(182, 245, 0, 0.1), rgba(224, 192, 151, 0.1))",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(S,{size:36,style:{color:"#CCCCCC"},className:"sm:w-10 sm:h-10"})}),e.jsx("p",{style:{fontWeight:"600",marginBottom:"6px",color:"#666666",fontSize:"clamp(0.875rem, 2vw, 1rem)"},children:"No notifications yet"}),e.jsx("p",{style:{fontSize:"clamp(0.813rem, 1.8vw, 0.875rem)"},children:"You're all caught up! ðŸŽ‰"})]}):n.map((a,N)=>e.jsx(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:N*.04},className:"notification-item-card",style:{padding:"clamp(12px, 2.5vw, 16px) clamp(12px, 3vw, 20px)",borderBottom:N!==n.length-1?"1px solid rgba(182, 245, 0, 0.1)":"none",borderLeft:"3px solid transparent",transition:"all 0.2s",cursor:"pointer",background:a.is_read?"transparent":"rgba(182, 245, 0, 0.05)"},onMouseEnter:f=>{f.currentTarget.style.background="rgba(182, 245, 0, 0.08)",f.currentTarget.style.borderLeftColor="#B6F500"},onMouseLeave:f=>{f.currentTarget.style.background=a.is_read?"transparent":"rgba(182, 245, 0, 0.05)",f.currentTarget.style.borderLeftColor="transparent"},onClick:()=>{b(a.id),x()},children:e.jsxs("div",{className:"flex items-start justify-between gap-2 sm:gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2",children:[!a.is_read&&e.jsx("span",{style:{width:"7px",height:"7px",background:"linear-gradient(135deg, #B6F500, #98CD00)",borderRadius:"50%",boxShadow:"0 0 8px rgba(182, 245, 0, 0.6)",flexShrink:0,marginTop:"4px"},className:"sm:w-2 sm:h-2"}),e.jsx("p",{style:{fontSize:"clamp(0.813rem, 1.8vw, 0.875rem)",color:"#2A2A2A",fontWeight:a.is_read?"400":"600",lineHeight:"1.5",wordBreak:"break-word"},children:a.message})]}),a.booking_data&&e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-2",children:[a.booking_data.booking_date&&e.jsxs("span",{style:{fontSize:"clamp(0.625rem, 1.4vw, 0.7rem)",color:"#E0C097",background:"rgba(224, 192, 151, 0.1)",padding:"3px 6px",borderRadius:"6px",display:"flex",alignItems:"center",gap:"3px",whiteSpace:"nowrap"},className:"sm:px-2",children:[e.jsx(q,{size:9,className:"sm:w-2.5 sm:h-2.5"}),new Date(a.booking_data.booking_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),a.booking_data.guest_count&&e.jsxs("span",{style:{fontSize:"clamp(0.625rem, 1.4vw, 0.7rem)",color:"#999999",display:"flex",alignItems:"center",gap:"3px",whiteSpace:"nowrap"},children:[e.jsx(W,{size:9,className:"sm:w-2.5 sm:h-2.5"}),a.booking_data.guest_count," guests"]})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[e.jsx("span",{style:{fontSize:"clamp(0.594rem, 1.3vw, 0.65rem)",color:"#999999",whiteSpace:"nowrap"},children:t(a.created_at)}),!a.is_read&&e.jsx("button",{onClick:f=>{f.stopPropagation(),b(a.id)},style:{fontSize:"clamp(0.594rem, 1.3vw, 0.65rem)",color:"#10B981",background:"rgba(16, 185, 129, 0.1)",border:"none",borderRadius:"4px",padding:"2px 5px",cursor:"pointer",fontWeight:"600",whiteSpace:"nowrap"},className:"sm:px-1.5",children:"Mark read"})]})]})},a.id))}),n.length>0&&e.jsx("div",{style:{padding:"clamp(12px, 2.5vw, 16px) clamp(16px, 3vw, 24px)",borderTop:"2px solid rgba(182, 245, 0, 0.15)",background:"rgba(250, 250, 246, 0.8)"},children:e.jsxs("button",{onClick:x,style:{width:"100%",padding:"clamp(10px, 2vw, 12px)",background:"linear-gradient(135deg, #E0C097, #C9A77D)",color:"#1a1a1a",borderRadius:"10px",border:"none",fontWeight:"700",fontSize:"clamp(0.813rem, 1.8vw, 0.875rem)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"clamp(6px, 1.5vw, 8px)",transition:"all 0.2s",boxShadow:"0 4px 12px rgba(224, 192, 151, 0.3)"},className:"sm:rounded-xl",onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 6px 20px rgba(224, 192, 151, 0.4)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="0 4px 12px rgba(224, 192, 151, 0.3)"},children:["View All Bookings",e.jsx(ie,{size:13,className:"sm:w-3.5 sm:h-3.5"})]})})]})]})})]})}function Be({pageTitle:w,onMenuClick:n}){const{user:h,signOut:i}=F(),j=B(),[u,b]=g.useState(!1),x=g.useRef(null),{notifications:t,unreadCount:a,markAsRead:N,markAllAsRead:f,isRealtimeConnected:y}=we();g.useEffect(()=>{const s=p=>{x.current&&!x.current.contains(p.target)&&b(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const o=()=>h?.email?h.email.charAt(0).toUpperCase():"A",r=async()=>{if(confirm("Are you sure you want to logout?"))try{await i(),j("/admin/login")}catch(s){console.error("Logout error:",s)}},m=()=>{b(s=>!s)},d=()=>{b(!1)},k=()=>{j("/admin/bookings"),b(!1)};return e.jsxs("div",{className:"admin-topbar",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:n,className:"lg:hidden p-2 rounded-lg transition-colors",style:{color:"#666666"},onMouseEnter:s=>{s.currentTarget.style.background="rgba(182, 245, 0, 0.08)",s.currentTarget.style.color="#B6F500"},onMouseLeave:s=>{s.currentTarget.style.background="transparent",s.currentTarget.style.color="#666666"},children:e.jsx(U,{size:22})}),e.jsx("h2",{className:"hidden lg:block",style:{fontFamily:"Poppins, sans-serif",fontSize:"1.25rem",fontWeight:"600",color:"#2A2A2A"},children:w})]}),e.jsxs("div",{className:"admin-search-bar",children:[e.jsx(de,{className:"admin-search-icon"}),e.jsx("input",{type:"text",placeholder:"Search...",className:"admin-search-input"})]}),e.jsxs("div",{className:"admin-topbar-actions",children:[e.jsxs("div",{ref:x,style:{position:"relative"},className:"notification-container",children:[e.jsxs("button",{onClick:m,className:"admin-notification-btn",style:{position:"relative"},"aria-label":"Notifications",children:[e.jsx(C.div,{animate:a>0?{color:["#666666","#E0C097","#666666"],scale:[1,1.1,1]}:{},transition:{duration:2,repeat:a>0?1/0:0,ease:"easeInOut"},children:e.jsx(S,{size:20})}),e.jsx(L,{children:a>0&&e.jsx(C.span,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"admin-notification-badge",style:{position:"absolute",top:"-4px",right:"-4px",minWidth:"18px",height:"18px",background:"linear-gradient(135deg, #FF6B6B, #FF5252)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",fontWeight:"700",color:"white",padding:"2px",boxShadow:"0 0 12px rgba(255, 107, 107, 0.6)",animation:"pulse-glow 1.5s infinite alternate"},children:a>9?"9+":a})}),y&&e.jsx("span",{style:{position:"absolute",bottom:"-2px",right:"-2px",width:"8px",height:"8px",background:"#10B981",borderRadius:"50%",border:"2px solid white",boxShadow:"0 0 6px rgba(16, 185, 129, 0.5)"}})]}),e.jsx(je,{isOpen:u,notifications:t,unreadCount:a,isRealtimeConnected:y,onClose:d,onMarkAllRead:f,onMarkAsRead:N,onViewAll:k})]}),e.jsx("button",{className:"admin-notification-btn",style:{position:"relative"},children:e.jsx(me,{size:20,style:{color:"#666666"}})}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"admin-profile-btn",children:[e.jsx("div",{className:"admin-profile-avatar",children:o()}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#2A2A2A"},children:"Admin"}),e.jsx("p",{style:{fontSize:"0.75rem",color:"#999999",marginTop:"2px"},children:h?.email||"admin@dreamavenue.com"})]})]}),e.jsx("div",{className:"absolute right-0 mt-2 w-48 rounded-xl shadow-lg border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",style:{backgroundColor:"#FFFFFF",borderColor:"#E5E7EB"},children:e.jsxs("button",{onClick:r,className:"w-full px-4 py-3 flex items-center gap-3 transition-colors rounded-xl",style:{color:"#EF4444"},onMouseEnter:s=>{s.currentTarget.style.backgroundColor="#FEE2E2"},onMouseLeave:s=>{s.currentTarget.style.backgroundColor="transparent"},children:[e.jsx($,{size:18}),e.jsx("span",{style:{fontWeight:"500"},children:"Logout"})]})})]})]}),e.jsx("style",{children:`
        @keyframes pulse-glow {
          from {
            box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
            transform: scale(1);
          }
          to {
            box-shadow: 0 0 16px rgba(255, 107, 107, 0.8);
            transform: scale(1.05);
          }
        }
      `})]})}const Ne=[{id:"dashboard",label:"Overview",icon:R,path:"/admin/dashboard"},{id:"packages",label:"Packages",icon:D,path:"/admin/packages"},{id:"bookings",label:"Bookings",icon:_,path:"/admin/bookings"},{id:"requests",label:"Requests",icon:_,path:"/admin/requests"},{id:"more",label:"More",icon:se,path:"/admin/gallery"}];function Te({currentPage:w}){return e.jsx("nav",{className:"mobile-bottom-nav",children:Ne.map(n=>{const h=n.icon,i=w===n.id;return e.jsxs(E,{to:n.path,className:`mobile-bottom-nav-item ${i?"active":""}`,children:[e.jsx(h,{size:22}),e.jsx("span",{children:n.label})]},n.id)})})}export{S as B,_e as D,Te as M,D as P,de as S,xe as T,ke as W,Be as a,me as b,be as c,we as u};
