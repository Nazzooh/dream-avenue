import{o as m,e as s,D as y,n as v,s as j,g as w,r as g,j as e,a as C,A as D,m as u}from"./index-BgtLIF6L.js";import{u as k}from"./useCalendar-DTiMvFHx.js";import{C as S,a as N}from"./chevron-right-C2sZLmp-.js";import"./logger-DwKo-Kyg.js";const b=m({id:s().uuid().optional(),title:s().min(1,"Event title is required"),description:s().optional().nullable(),event_date:s().min(1,"Event date is required"),start_time:s().optional().nullable(),end_time:s().optional().nullable(),attendees:v().int().positive("Attendees must be positive").optional().nullable(),package_id:s().uuid().optional().nullable(),status:s().optional().nullable(),created_at:s().optional(),is_active:y().optional().default(!0),type:s().optional().nullable(),organizer:s().optional().nullable(),location:s().optional().nullable(),image_url:s().url("Must be a valid URL").optional().nullable()}),M=b.omit({id:!0,created_at:!0});M.partial();const R=async i=>{let r=j.from("events").select("*").order("event_date",{ascending:!1});const{data:n,error:o}=await r;if(o)throw new Error(o.message);return b.array().parse(n||[])},f={all:["events"],lists:()=>[...f.all,"list"],list:i=>[...f.lists(),i],details:()=>[...f.all,"detail"],detail:i=>[...f.details(),i]},W=i=>w({queryKey:f.list(i),queryFn:()=>R()});function A({date:i,isCurrentMonth:r,isToday:n,isPast:o,status:a}){const d=i.getDate();let t={display:"flex",alignItems:"center",justifyContent:"center",width:"100%",aspectRatio:"1 / 1",borderRadius:"10px",fontSize:"0.875rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"default",position:"relative",boxSizing:"border-box"};return r?o?(t.color="#9ca3af",t.opacity="0.5",t.background="transparent"):a==="booked"||a==="full"?(t.background="#fff4c2",t.color="#8b6914",t.border="2px solid #f5d96c",t.fontWeight="600"):a==="available"?(t.background="#ccf4ce",t.color="#2d5016",t.border="2px solid #87e18a",t.fontWeight="600",t.cursor="pointer"):a==="partial"?(t.background="#fff4c2",t.color="#8b6914",t.border="2px solid #f5d96c",t.fontWeight="600"):(t.color="#374151",t.background="transparent"):(t.color="#9ca3af",t.opacity="0.4",t.background="transparent"),n&&(t.border="3px solid #C8D46B",t.fontWeight="700",t.boxShadow="0 0 0 3px rgba(200, 212, 107, 0.2)"),e.jsx(u.div,{style:t,whileHover:a==="available"&&!o?{scale:1.05,boxShadow:"0 2px 8px rgba(135, 225, 138, 0.4)"}:{},whileTap:a==="available"&&!o?{scale:.98}:{},children:d})}function E({currentDate:i,availabilityData:r}){const n=g.useMemo(()=>new Date,[]),o=g.useMemo(()=>{const a=i.getFullYear(),d=i.getMonth(),t=new Date(a,d,1),p=new Date(t),x=t.getDay();p.setDate(t.getDate()-x);const h=[];for(let c=0;c<42;c++){const l=new Date(p);l.setDate(p.getDate()+c),h.push(l)}return h},[i]);return e.jsxs("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden",boxSizing:"border-box"},children:[e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"6px",marginBottom:"12px",width:"100%"},children:["SUN","MON","TUE","WED","THU","FRI","SAT"].map(a=>e.jsx("div",{style:{textAlign:"center",fontSize:"0.7rem",color:"#9ca3af",fontWeight:"600",letterSpacing:"0.5px"},children:a},a))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"6px",width:"100%"},children:o.map((a,d)=>{const t=a.toISOString().split("T")[0],p=a.getMonth()===i.getMonth(),x=a.getDate()===n.getDate()&&a.getMonth()===n.getMonth()&&a.getFullYear()===n.getFullYear(),h=a<n&&!x;let c=null;if(r&&r[t]){const l=r[t];l.full_day?c="booked":l.morning||l.evening||l.night||l.short_duration?c="partial":c="available"}else p&&!h&&(c="available");return e.jsx(A,{date:a,isCurrentMonth:p,isToday:x,isPast:h,status:c},d)})})]})}function z({currentDate:i,onPrevMonth:r,onNextMonth:n}){const o=g.useMemo(()=>i.toLocaleDateString("en-US",{month:"long",year:"numeric"}),[i]);return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"28px",width:"100%"},children:[e.jsx(u.button,{onClick:r,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"42px",height:"42px",background:"#f0f4c3",border:"1px solid #C8D46B",borderRadius:"50%",cursor:"pointer",transition:"all 0.3s ease",flexShrink:0},whileHover:{background:"#C8D46B",scale:1.05},whileTap:{scale:.95},children:e.jsx(S,{size:20,color:"#5a6c0f"})}),e.jsx(u.h3,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},style:{fontFamily:"'Playfair Display', serif",fontSize:"clamp(1.125rem, 4vw, 1.5rem)",color:"#2a2a2a",margin:0,textAlign:"center"},children:o},o),e.jsx(u.button,{onClick:n,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"42px",height:"42px",background:"#f0f4c3",border:"1px solid #C8D46B",borderRadius:"50%",cursor:"pointer",transition:"all 0.3s ease",flexShrink:0},whileHover:{background:"#C8D46B",scale:1.05},whileTap:{scale:.95},children:e.jsx(N,{size:20,color:"#5a6c0f"})})]})}function B(){const i=[{label:"Available",color:"#ccf4ce",borderColor:"#87e18a",textColor:"#2d5016"},{label:"Limited",color:"#fff4c2",borderColor:"#f5d96c",textColor:"#8b6914"},{label:"Fully Booked",color:"#fff4c2",borderColor:"#f5d96c",textColor:"#8b6914"},{label:"Today",color:"transparent",borderColor:"#C8D46B",textColor:"#2a2a2a"}];return e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",justifyContent:"center",marginTop:"24px"},children:i.map(r=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"20px",height:"20px",background:r.color,border:`2px solid ${r.borderColor}`,borderRadius:"6px",flexShrink:0}}),e.jsx("span",{style:{fontSize:"0.85rem",color:"#666"},children:r.label})]},r.label))})}function T(){const[i,r]=g.useState(new Date),[n,o]=g.useState("left"),a=i.getFullYear(),d=i.getMonth()+1,{data:t,isLoading:p,error:x}=k(a,d),h=()=>{o("right"),r(l=>new Date(l.getFullYear(),l.getMonth()-1,1))},c=()=>{o("left"),r(l=>new Date(l.getFullYear(),l.getMonth()+1,1))};return x?e.jsxs("div",{className:"text-center",style:{padding:"48px 16px"},children:[e.jsx(C,{size:48,style:{color:"#9ca3af",margin:"0 auto 16px"}}),e.jsxs("p",{style:{color:"#ef4444",marginBottom:"16px"},children:["Error loading calendar: ",x instanceof Error?x.message:"Unknown error"]})]}):e.jsx("div",{className:"calendar-wrapper",style:{width:"100%",maxWidth:"100%",overflowX:"hidden",overflowY:"visible",boxSizing:"border-box",padding:"0"},children:e.jsxs("div",{style:{background:"#ffffff",borderRadius:"20px",padding:"clamp(16px, 4vw, 32px)",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.05)",border:"1px solid rgba(200, 212, 107, 0.15)",maxWidth:"500px",margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[e.jsx(z,{currentDate:i,onPrevMonth:h,onNextMonth:c}),e.jsx(D,{mode:"wait",children:e.jsx(u.div,{initial:{opacity:0,x:n==="left"?20:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:n==="left"?-20:20},transition:{duration:.3},children:p?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"300px"},children:e.jsx("div",{style:{width:"48px",height:"48px",border:"4px solid rgba(200, 212, 107, 0.2)",borderTop:"4px solid #C8D46B",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):e.jsx(E,{currentDate:i,availabilityData:t||{}})},`${a}-${d}`)}),e.jsx(B,{})]})})}function Y(){const{data:i=[],isLoading:r,error:n,refetch:o}=W();return g.useMemo(()=>i.filter(a=>new Date(a.event_date)>=new Date),[i]),r?e.jsx("section",{id:"availability-calendar",className:"section",style:{background:"var(--white)"},children:e.jsxs("div",{className:"container",children:[e.jsxs(u.div,{className:"section-header",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:"section-badge",children:"Availability"}),e.jsx("h2",{className:"section-title",children:"Availability Calendar"}),e.jsx("p",{className:"section-description",children:"Check when Dream Avenue is available for your next event"})]}),e.jsxs("div",{style:{background:"var(--white)",borderRadius:"var(--radius-2xl)",padding:"var(--space-8)",boxShadow:"var(--shadow-xl)",border:"1px solid rgba(182, 245, 0, 0.15)",maxWidth:"900px",margin:"0 auto"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"var(--space-8)"},children:[e.jsx("div",{style:{width:"44px",height:"44px",background:"var(--gray-200)",borderRadius:"var(--radius-full)",animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"200px",height:"32px",background:"var(--gray-200)",borderRadius:"var(--radius-md)",animation:"pulse 1.5s ease-in-out infinite"}}),e.jsx("div",{style:{width:"44px",height:"44px",background:"var(--gray-200)",borderRadius:"var(--radius-full)",animation:"pulse 1.5s ease-in-out infinite"}})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"var(--space-2)",marginBottom:"var(--space-6)"},children:[[1,2,3,4,5,6,7].map(a=>e.jsx("div",{style:{height:"28px",background:"var(--gray-200)",borderRadius:"var(--radius-sm)",animation:"pulse 1.5s ease-in-out infinite",animationDelay:`${a*.05}s`}},`header-${a}`)),Array.from({length:42}).map((a,d)=>e.jsx("div",{style:{aspectRatio:"1",background:"var(--gray-200)",borderRadius:"var(--radius-md)",animation:"pulse 1.5s ease-in-out infinite",animationDelay:`${d%7*.05}s`}},`cell-${d}`))]}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"var(--space-4)",justifyContent:"center"},children:[1,2,3,4].map(a=>e.jsx("div",{style:{width:"140px",height:"24px",background:"var(--gray-200)",borderRadius:"var(--radius-full)",animation:"pulse 1.5s ease-in-out infinite",animationDelay:`${a*.1}s`}},`legend-${a}`))})]})]})}):n?e.jsx("section",{id:"events",className:"section",style:{background:"var(--white)"},children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("p",{style:{color:"#ef4444",marginBottom:"var(--space-4)"},children:["Error: ",n instanceof Error?n.message:"Failed to load events"]}),e.jsx("button",{onClick:()=>o(),className:"btn btn-primary",children:"Retry"})]})})}):e.jsx("section",{id:"availability-calendar",className:"section",style:{background:"var(--white)",width:"100%",maxWidth:"100%",overflow:"hidden"},children:e.jsxs("div",{className:"container",style:{width:"100%",maxWidth:"100%",boxSizing:"border-box"},children:[e.jsxs(u.div,{className:"section-header",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[e.jsx("div",{className:"section-badge",children:"Availability"}),e.jsx("h2",{className:"section-title",children:"Availability Calendar"}),e.jsx("p",{className:"section-description",children:"Check when Dream Avenue is available for your next event"})]}),e.jsx(u.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},style:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:e.jsx(T,{})})]})})}export{Y as Events};
