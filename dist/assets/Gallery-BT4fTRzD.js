import{r as m,j as e,m as h}from"./index-BgtLIF6L.js";import{A as b}from"./AdminLayout-CTW1HI_8.js";import{u as D,A as F,P as O,M as T,F as U,a as z,I as L}from"./Toast-bOL5W7LZ.js";import{B as v}from"./Button-CgqdUs4z.js";import{u as P,a as _,b as B,c as R}from"./useGallery-zHTrYhG4.js";import{L as $}from"./loader-circle-Dd0VitYI.js";import{P as f}from"./plus-BuxmFQGL.js";import{T as q}from"./trash-2-CLq1pX_V.js";import{I as H}from"./image-Cp5bxKh3.js";import"./MobileBottomNav-BLHxEF1a.js";import"./useAuth-BroS41fB.js";import"./logger-DwKo-Kyg.js";import"./building-2-DUyhWP1J.js";import"./chevron-right-C2sZLmp-.js";import"./house-CE1JIjXO.js";import"./check-Ds-CQaI1.js";import"./info-CE_2Kfyg.js";import"./circle-x-CH53C8w-.js";import"./circle-check-big-D8Kqx3Nv.js";const j=[{value:"weddings",label:"Weddings"},{value:"corporate",label:"Corporate Events"},{value:"birthdays",label:"Birthdays"},{value:"receptions",label:"Receptions"},{value:"conferences",label:"Conferences"},{value:"other",label:"Other"}];function V(){const[N,n]=m.useState(!1),[r,i]=m.useState(null),[o,g]=m.useState("all"),[u,s]=m.useState(""),{showToast:l,ToastContainer:I}=D(),{data:d=[],isLoading:w}=P(),C=_(),A=B(),k=R(),G=a=>{i(a),s(a.image_url),n(!0)},M=async a=>{if(confirm(`Are you sure you want to delete "${a.title||"this image"}"?`))try{await k.mutateAsync(a.id),l("success","Image deleted successfully")}catch(t){console.error("Delete error:",t),l("error","Failed to delete image")}},E=async a=>{a.preventDefault();const t=a.currentTarget,c=new FormData(t),x={title:c.get("title"),category:c.get("category"),image_url:u};if(!u){l("error","Please upload an image");return}try{r?(await A.mutateAsync({id:r.id,data:x}),l("success","Image updated successfully")):(await C.mutateAsync(x),l("success","Image added successfully")),n(!1),i(null),s("")}catch(S){console.error("Submit error:",S),l("error","Operation failed")}},y=()=>{i(null),s(""),n(!0)},p=o==="all"?d:d.filter(a=>a.category===o);return w?e.jsx(b,{children:e.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"60vh"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(h.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx($,{className:"mx-auto mb-4",size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Loading gallery..."})]})})}):e.jsxs(b,{children:[e.jsxs("div",{className:"admin-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-page-title",children:"Gallery Management"}),e.jsx("p",{className:"admin-page-description",children:"Manage your venue's photo gallery across different event categories"})]}),e.jsxs("button",{onClick:y,className:"admin-btn admin-btn-primary",children:[e.jsx(f,{size:20}),"Add Image"]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap mb-8",children:[e.jsxs("button",{onClick:()=>g("all"),className:`px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 ${o==="all"?"bg-gradient-neon text-[var(--dream-dark-bg)] shadow-lg border-glow":"bg-[var(--dream-dark-secondary)] text-[var(--dream-text-secondary)] border border-[rgba(0,255,65,0.2)] hover:border-[var(--dream-neon-green)] hover:text-[var(--dream-neon-green)]"}`,children:["All ",e.jsxs("span",{className:"opacity-75",children:["(",d.length,")"]})]}),j.map(a=>{const t=d.filter(c=>c.category===a.value).length;return e.jsxs("button",{onClick:()=>g(a.value),className:`px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 ${o===a.value?"bg-gradient-neon text-[var(--dream-dark-bg)] shadow-lg border-glow":"bg-[var(--dream-dark-secondary)] text-[var(--dream-text-secondary)] border border-[rgba(0,255,65,0.2)] hover:border-[var(--dream-neon-green)] hover:text-[var(--dream-neon-green)]"}`,children:[a.label," ",e.jsxs("span",{className:"opacity-75",children:["(",t,")"]})]},a.value)})]}),e.jsx(F,{columns:"3",children:p.map((a,t)=>e.jsxs(h.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:t*.04,duration:.4},className:"gallery-item",children:[e.jsxs("div",{className:"relative h-60 overflow-hidden",children:[e.jsx("img",{src:a.image_url,alt:a.title||"Gallery image",className:"gallery-item-image"}),e.jsxs("div",{className:"gallery-item-overlay",children:[e.jsxs("button",{onClick:()=>G(a),className:"admin-btn admin-btn-primary admin-btn-sm",children:[e.jsx(O,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>M(a),className:"admin-btn admin-btn-danger admin-btn-sm",children:[e.jsx(q,{size:16}),"Delete"]})]})]}),e.jsxs("div",{className:"gallery-item-info",children:[e.jsx("h4",{className:"gallery-item-title",children:a.title||"Untitled"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"gallery-item-category",children:a.category}),a.display_order&&e.jsxs("span",{className:"text-xs",style:{color:"var(--dream-text-muted)"},children:["Order: ",a.display_order]})]})]})]},a.id))}),p.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full mb-6",style:{background:"rgba(0, 255, 65, 0.1)",border:"2px solid rgba(0, 255, 65, 0.3)"},children:e.jsx(H,{size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--dream-text-primary)"},children:"No images in this category"}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Add images to showcase your venue"}),e.jsxs("button",{onClick:y,className:"admin-btn admin-btn-primary mt-6",children:[e.jsx(f,{size:20}),"Add First Image"]})]}),e.jsx(T,{isOpen:N,onClose:()=>{n(!1),i(null),s("")},title:r?"Edit Gallery Image":"Add New Gallery Image",children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsx(U,{name:"title",label:"Image Title",placeholder:"e.g., Elegant Wedding Reception Hall",defaultValue:r?.title,required:!0}),e.jsx(z,{name:"category",label:"Event Category",defaultValue:r?.category||"weddings",options:j,required:!0}),e.jsx(L,{label:"Upload Image",value:u,onChange:s}),e.jsxs("div",{className:"flex gap-3 justify-end pt-6 border-t",style:{borderColor:"rgba(0, 255, 65, 0.2)"},children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>{n(!1),i(null),s("")},children:"Cancel"}),e.jsx(v,{type:"submit",variant:"primary",children:r?"Update Image":"Add Image"})]})]})}),I]})}function ue(){return e.jsx(V,{})}export{ue as AdminGallery};
