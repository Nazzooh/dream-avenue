import{c as T,j as e,r as u,X as f,A as W,m,s as w,R as _}from"./index-BgtLIF6L.js";import{L as G}from"./loader-circle-Dd0VitYI.js";import{C as U}from"./check-Ds-CQaI1.js";import{I as q}from"./info-CE_2Kfyg.js";import{C as H}from"./circle-x-CH53C8w-.js";import{C as X}from"./circle-check-big-D8Kqx3Nv.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],te=T("pen",J);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],I=T("upload",K);function re({children:t,columns:a="3",gap:s,className:r=""}){const i=a==="3"?"admin-grid admin-grid-3":"admin-grid admin-grid-auto",l=s?{gap:s}:void 0;return e.jsx("div",{className:`${i} ${r}`,style:l,children:t})}function ie({isOpen:t,onClose:a,title:s,children:r,size:i="md"}){if(u.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const l={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"admin-modal-overlay",onClick:a,children:e.jsxs("div",{className:`admin-modal ${l[i]}`,onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"admin-modal-header",children:[e.jsx("h3",{className:"admin-modal-title",children:s}),e.jsx("button",{onClick:a,className:"admin-modal-close",children:e.jsx(f,{size:20})})]}),e.jsx("div",{className:"admin-modal-body",children:r})]})})}function le({label:t,error:a,helpText:s,className:r="",...i}){return e.jsxs("div",{className:"admin-form-group",children:[e.jsxs("label",{className:"admin-label",children:[t,i.required&&e.jsx("span",{style:{color:"var(--dream-danger)"},children:" *"})]}),e.jsx("input",{className:`admin-input ${r}`,...i}),s&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-text-muted)"},children:s}),a&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-danger)"},children:a})]})}function ne({label:t,options:a,error:s,helpText:r,className:i="",...l}){return e.jsxs("div",{className:"admin-form-group",children:[e.jsxs("label",{className:"admin-label",children:[t,l.required&&e.jsx("span",{style:{color:"var(--dream-danger)"},children:" *"})]}),e.jsx("select",{className:`admin-select ${i}`,...l,children:a.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))}),r&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-text-muted)"},children:r}),s&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-danger)"},children:s})]})}function oe({label:t,value:a,onChange:s,onUpload:r,bucket:i="facilities_images",folder:l="",facilityId:c,error:p,maxSize:y=5,accept:k="image/jpeg,image/png,image/webp,image/jpg"}){const[b,j]=u.useState(a||""),[v,C]=u.useState(!1),[D,z]=u.useState(!1),[P,h]=u.useState(""),[$,x]=u.useState(0),g=u.useRef(null),E=async n=>{const o=n.target.files?.[0];if(o){if(o.size>y*1024*1024){h(`File size must be less than ${y}MB`);return}if(!o.type.startsWith("image/")){h("Please upload an image file");return}h(""),C(!0),x(10);try{const d=new FileReader;d.onloadend=()=>{j(d.result),x(30)},d.readAsDataURL(o);let N;if(r)N=await r(o);else{const B=o.name.split(".").pop(),S=`${c||Date.now()}-${Date.now()}.${B}`,F=l?`${l}/${S}`:S;x(50);const{data:V,error:R}=await w.storage.from(i).upload(F,o,{cacheControl:"3600",upsert:!0});if(R)throw new Error(R.message);x(80);const{data:L}=w.storage.from(i).getPublicUrl(F);N=L.publicUrl}x(100),z(!0),s(N),setTimeout(()=>{z(!1)},2e3)}catch(d){console.error("Upload error:",d),h(d.message||"Failed to upload image"),j("")}finally{C(!1),x(0)}}},M=async()=>{if(a&&a.startsWith("http"))try{const n=a.split("/"),o=n[n.length-1],d=l?`${l}/${o}`:o;await w.storage.from(i).remove([d])}catch(n){console.error("Error removing file:",n)}j(""),s(null),g.current&&(g.current.value="")},A=()=>{g.current?.click()};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block font-medium",style:{color:"var(--dream-text-primary)",fontSize:"0.875rem"},children:t}),e.jsx(W,{mode:"wait",children:b?e.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"relative group",children:[e.jsxs("div",{className:"relative w-full rounded-2xl overflow-hidden",style:{height:"200px",border:"2px solid rgba(0, 255, 65, 0.3)",boxShadow:"0 4px 20px rgba(0, 255, 65, 0.15)"},children:[e.jsx("img",{src:b,alt:"Preview",className:"w-full h-full object-cover",style:{transition:"transform 0.3s ease"}}),v&&e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center",style:{background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},children:[e.jsx(m.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx(G,{className:"mb-3",size:40,style:{color:"var(--dream-neon-green)"}})}),e.jsx("div",{className:"w-48 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:"0%"},animate:{width:`${$}%`},transition:{duration:.3},style:{height:"100%",background:"linear-gradient(90deg, var(--dream-neon-green), #98CD00)"}})}),e.jsxs("p",{className:"text-white text-sm mt-2",children:["Uploading... ",$,"%"]})]}),D&&e.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",style:{background:"rgba(0, 255, 65, 0.9)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(U,{size:60,style:{color:"#1a1a1a",margin:"0 auto"}}),e.jsx("p",{className:"text-lg font-semibold mt-2",style:{color:"#1a1a1a"},children:"Uploaded!"})]})}),e.jsxs(m.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 flex items-center justify-center gap-3",style:{background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",transition:"opacity 0.3s ease"},children:[e.jsxs("button",{type:"button",onClick:A,className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-all",style:{background:"linear-gradient(135deg, var(--dream-neon-green), #98CD00)",color:"#1a1a1a",fontWeight:600,fontSize:"0.875rem"},children:[e.jsx(I,{size:16}),"Replace"]}),e.jsxs("button",{type:"button",onClick:M,className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-all",style:{background:"rgba(231, 76, 60, 0.9)",color:"white",fontWeight:600,fontSize:"0.875rem"},children:[e.jsx(f,{size:16}),"Remove"]})]})]}),a&&e.jsxs("div",{className:"mt-2 px-3 py-2 rounded-lg flex items-center gap-2",style:{background:"rgba(0, 255, 65, 0.1)",border:"1px solid rgba(0, 255, 65, 0.2)"},children:[e.jsx(U,{size:16,style:{color:"var(--dream-neon-green)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--dream-text-secondary)"},children:"Image uploaded successfully"})]})]},"preview"):e.jsxs(m.label,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"block cursor-pointer",style:{height:"200px",border:"2px dashed rgba(0, 255, 65, 0.3)",borderRadius:"16px",background:"rgba(0, 255, 65, 0.05)",transition:"all 0.3s ease"},onMouseEnter:n=>{n.currentTarget.style.borderColor="var(--dream-neon-green)",n.currentTarget.style.background="rgba(0, 255, 65, 0.1)"},onMouseLeave:n=>{n.currentTarget.style.borderColor="rgba(0, 255, 65, 0.3)",n.currentTarget.style.background="rgba(0, 255, 65, 0.05)"},children:[e.jsx("input",{ref:g,type:"file",accept:k,onChange:E,className:"hidden",disabled:v}),e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(0, 255, 65, 0.2), rgba(224, 192, 151, 0.2))",border:"2px solid rgba(0, 255, 65, 0.4)"},children:e.jsx(I,{size:32,style:{color:"var(--dream-neon-green)"}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold mb-1",style:{color:"var(--dream-text-primary)"},children:"Click to upload image"}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--dream-text-secondary)"},children:["PNG, JPG, WebP up to ",y,"MB"]})]})]})]},"upload")}),b&&e.jsx("input",{ref:g,type:"file",accept:k,onChange:E,className:"hidden",disabled:v}),(p||P)&&e.jsxs(m.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 px-3 py-2 rounded-lg",style:{fontSize:"0.75rem",color:"#E74C3C",background:"rgba(231, 76, 60, 0.1)",border:"1px solid rgba(231, 76, 60, 0.2)"},children:[e.jsx(f,{size:14}),p||P]})]})}function Q({type:t,message:a,onClose:s,duration:r=3e3}){u.useEffect(()=>{const p=setTimeout(s,r);return()=>clearTimeout(p)},[r,s]);const i={success:{icon:X,gradient:"from-[#10b981] to-[#059669]",bg:"bg-[#10b981]"},error:{icon:H,gradient:"from-[#E74C3C] to-[#C0392B]",bg:"bg-[#E74C3C]"},info:{icon:q,gradient:"from-[#B6F500] to-[#A4DD00]",bg:"bg-[#B6F500]"}},{icon:l,gradient:c}=i[t];return e.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-in slide-in-from-bottom-5 duration-300",children:e.jsxs("div",{className:`bg-gradient-to-r ${c} text-white rounded-xl shadow-2xl p-4 pr-12 max-w-md`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(l,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:a})]}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:e.jsx(f,{className:"w-4 h-4"})})]})})}function ce(){const[t,a]=_.useState(null),s=(i,l)=>{a({type:i,message:l})},r=t?e.jsx(Q,{type:t.type,message:t.message,onClose:()=>a(null)}):null;return{showToast:s,ToastContainer:r}}export{re as A,le as F,oe as I,ie as M,te as P,ne as a,ce as u};
