import{j as e,X as f,L as W,n as U,a6 as T,I as L,a7 as G,z as q}from"./vendor-ui-Bvf1z7Qk.js";import{b as u,R as X}from"./vendor-react-DmQ-wajQ.js";import{A as H,m,s as w}from"./index-DCvhesIs.js";function Y({children:t,columns:a="3",gap:s,className:r=""}){const l=a==="3"?"admin-grid admin-grid-3":"admin-grid admin-grid-auto",i=s?{gap:s}:void 0;return e.jsx("div",{className:`${l} ${r}`,style:i,children:t})}function Z({isOpen:t,onClose:a,title:s,children:r,size:l="md"}){if(u.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const i={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"};return e.jsx("div",{className:"admin-modal-overlay",onClick:a,children:e.jsxs("div",{className:`admin-modal ${i[l]}`,onClick:c=>c.stopPropagation(),children:[e.jsxs("div",{className:"admin-modal-header",children:[e.jsx("h3",{className:"admin-modal-title",children:s}),e.jsx("button",{onClick:a,className:"admin-modal-close",children:e.jsx(f,{size:20})})]}),e.jsx("div",{className:"admin-modal-body",children:r})]})})}function O({label:t,error:a,helpText:s,className:r="",...l}){return e.jsxs("div",{className:"admin-form-group",children:[e.jsxs("label",{className:"admin-label",children:[t,l.required&&e.jsx("span",{style:{color:"var(--dream-danger)"},children:" *"})]}),e.jsx("input",{className:`admin-input ${r}`,...l}),s&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-text-muted)"},children:s}),a&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-danger)"},children:a})]})}function ee({label:t,options:a,error:s,helpText:r,className:l="",...i}){return e.jsxs("div",{className:"admin-form-group",children:[e.jsxs("label",{className:"admin-label",children:[t,i.required&&e.jsx("span",{style:{color:"var(--dream-danger)"},children:" *"})]}),e.jsx("select",{className:`admin-select ${l}`,...i,children:a.map(c=>e.jsx("option",{value:c.value,children:c.label},c.value))}),r&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-text-muted)"},children:r}),s&&e.jsx("p",{className:"text-xs mt-2",style:{color:"var(--dream-danger)"},children:s})]})}function ae({label:t,value:a,onChange:s,onUpload:r,bucket:l="facilities_images",folder:i="",facilityId:c,error:p,maxSize:b=5,accept:C="image/jpeg,image/png,image/webp,image/jpg"}){const[y,j]=u.useState(a||""),[v,k]=u.useState(!1),[D,z]=u.useState(!1),[$,h]=u.useState(""),[E,x]=u.useState(0),g=u.useRef(null),P=async n=>{const o=n.target.files?.[0];if(o){if(o.size>b*1024*1024){h(`File size must be less than ${b}MB`);return}if(!o.type.startsWith("image/")){h("Please upload an image file");return}h(""),k(!0),x(10);try{const d=new FileReader;d.onloadend=()=>{j(d.result),x(30)},d.readAsDataURL(o);let N;if(r)N=await r(o);else{const B=o.name.split(".").pop(),S=`${c||Date.now()}-${Date.now()}.${B}`,F=i?`${i}/${S}`:S;x(50);const{data:_,error:R}=await w.storage.from(l).upload(F,o,{cacheControl:"3600",upsert:!0});if(R)throw new Error(R.message);x(80);const{data:M}=w.storage.from(l).getPublicUrl(F);N=M.publicUrl}x(100),z(!0),s(N),setTimeout(()=>{z(!1)},2e3)}catch(d){console.error("Upload error:",d),h(d.message||"Failed to upload image"),j("")}finally{k(!1),x(0)}}},I=async()=>{if(a&&a.startsWith("http"))try{const n=a.split("/"),o=n[n.length-1],d=i?`${i}/${o}`:o;await w.storage.from(l).remove([d])}catch(n){console.error("Error removing file:",n)}j(""),s(null),g.current&&(g.current.value="")},A=()=>{g.current?.click()};return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block font-medium",style:{color:"var(--dream-text-primary)",fontSize:"0.875rem"},children:t}),e.jsx(H,{mode:"wait",children:y?e.jsxs(m.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"relative group",children:[e.jsxs("div",{className:"relative w-full rounded-2xl overflow-hidden",style:{height:"200px",border:"2px solid rgba(0, 255, 65, 0.3)",boxShadow:"0 4px 20px rgba(0, 255, 65, 0.15)"},children:[e.jsx("img",{src:y,alt:"Preview",className:"w-full h-full object-cover",style:{transition:"transform 0.3s ease"}}),v&&e.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 flex flex-col items-center justify-center",style:{background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(4px)"},children:[e.jsx(m.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx(W,{className:"mb-3",size:40,style:{color:"var(--dream-neon-green)"}})}),e.jsx("div",{className:"w-48 h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx(m.div,{initial:{width:"0%"},animate:{width:`${E}%`},transition:{duration:.3},style:{height:"100%",background:"linear-gradient(90deg, var(--dream-neon-green), #98CD00)"}})}),e.jsxs("p",{className:"text-white text-sm mt-2",children:["Uploading... ",E,"%"]})]}),D&&e.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"absolute inset-0 flex items-center justify-center",style:{background:"rgba(0, 255, 65, 0.9)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(U,{size:60,style:{color:"#1a1a1a",margin:"0 auto"}}),e.jsx("p",{className:"text-lg font-semibold mt-2",style:{color:"#1a1a1a"},children:"Uploaded!"})]})}),e.jsxs(m.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 flex items-center justify-center gap-3",style:{background:"rgba(0, 0, 0, 0.6)",backdropFilter:"blur(4px)",transition:"opacity 0.3s ease"},children:[e.jsxs("button",{type:"button",onClick:A,className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-all",style:{background:"linear-gradient(135deg, var(--dream-neon-green), #98CD00)",color:"#1a1a1a",fontWeight:600,fontSize:"0.875rem"},children:[e.jsx(T,{size:16}),"Replace"]}),e.jsxs("button",{type:"button",onClick:I,className:"px-4 py-2 rounded-lg flex items-center gap-2 transition-all",style:{background:"rgba(231, 76, 60, 0.9)",color:"white",fontWeight:600,fontSize:"0.875rem"},children:[e.jsx(f,{size:16}),"Remove"]})]})]}),a&&e.jsxs("div",{className:"mt-2 px-3 py-2 rounded-lg flex items-center gap-2",style:{background:"rgba(0, 255, 65, 0.1)",border:"1px solid rgba(0, 255, 65, 0.2)"},children:[e.jsx(U,{size:16,style:{color:"var(--dream-neon-green)"}}),e.jsx("span",{style:{fontSize:"0.75rem",color:"var(--dream-text-secondary)"},children:"Image uploaded successfully"})]})]},"preview"):e.jsxs(m.label,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3},className:"block cursor-pointer",style:{height:"200px",border:"2px dashed rgba(0, 255, 65, 0.3)",borderRadius:"16px",background:"rgba(0, 255, 65, 0.05)",transition:"all 0.3s ease"},onMouseEnter:n=>{n.currentTarget.style.borderColor="var(--dream-neon-green)",n.currentTarget.style.background="rgba(0, 255, 65, 0.1)"},onMouseLeave:n=>{n.currentTarget.style.borderColor="rgba(0, 255, 65, 0.3)",n.currentTarget.style.background="rgba(0, 255, 65, 0.05)"},children:[e.jsx("input",{ref:g,type:"file",accept:C,onChange:P,className:"hidden",disabled:v}),e.jsxs("div",{className:"h-full flex flex-col items-center justify-center gap-3",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(0, 255, 65, 0.2), rgba(224, 192, 151, 0.2))",border:"2px solid rgba(0, 255, 65, 0.4)"},children:e.jsx(T,{size:32,style:{color:"var(--dream-neon-green)"}})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold mb-1",style:{color:"var(--dream-text-primary)"},children:"Click to upload image"}),e.jsxs("p",{style:{fontSize:"0.75rem",color:"var(--dream-text-secondary)"},children:["PNG, JPG, WebP up to ",b,"MB"]})]})]})]},"upload")}),y&&e.jsx("input",{ref:g,type:"file",accept:C,onChange:P,className:"hidden",disabled:v}),(p||$)&&e.jsxs(m.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"flex items-center gap-2 px-3 py-2 rounded-lg",style:{fontSize:"0.75rem",color:"#E74C3C",background:"rgba(231, 76, 60, 0.1)",border:"1px solid rgba(231, 76, 60, 0.2)"},children:[e.jsx(f,{size:14}),p||$]})]})}function J({type:t,message:a,onClose:s,duration:r=3e3}){u.useEffect(()=>{const p=setTimeout(s,r);return()=>clearTimeout(p)},[r,s]);const l={success:{icon:q,gradient:"from-[#10b981] to-[#059669]",bg:"bg-[#10b981]"},error:{icon:G,gradient:"from-[#E74C3C] to-[#C0392B]",bg:"bg-[#E74C3C]"},info:{icon:L,gradient:"from-[#B6F500] to-[#A4DD00]",bg:"bg-[#B6F500]"}},{icon:i,gradient:c}=l[t];return e.jsx("div",{className:"fixed bottom-6 right-6 z-50 animate-in slide-in-from-bottom-5 duration-300",children:e.jsxs("div",{className:`bg-gradient-to-r ${c} text-white rounded-xl shadow-2xl p-4 pr-12 max-w-md`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(i,{className:"w-5 h-5 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:a})]}),e.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",children:e.jsx(f,{className:"w-4 h-4"})})]})})}function se(){const[t,a]=X.useState(null),s=(l,i)=>{a({type:l,message:i})},r=t?e.jsx(J,{type:t.type,message:t.message,onClose:()=>a(null)}):null;return{showToast:s,ToastContainer:r}}export{Y as A,O as F,ae as I,Z as M,ee as a,se as u};
