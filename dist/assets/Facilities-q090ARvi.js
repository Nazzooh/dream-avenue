import{j as e,L as F,Y as L,$ as V,O as C,a0 as b,E as I,w as z,R as S,V as _,S as h,G as $,a1 as q,l as G,a2 as R,a3 as X,a4 as Y,a5 as J}from"./vendor-ui-Bvf1z7Qk.js";import{b as m}from"./vendor-react-DmQ-wajQ.js";import{A as M}from"./AdminLayout-3i5P8tIF.js";import{u as K,A as Q,M as Z,I as ee,F as ae,a as T}from"./Toast-BGWb8XWp.js";import{F as te}from"./FormTextarea-BOQnmUve.js";import{B as D}from"./Button-B61ojvht.js";import{u as se,a as ie,b as re,c as ne}from"./useFacilities-6tAdPfce.js";import{m as x}from"./index-DCvhesIs.js";import"./MobileBottomNav-B5hhplxL.js";import"./useAuth-BHPREJkW.js";import"./logger-DwKo-Kyg.js";import"./vendor-motion-DcNBMtCR.js";const W=[{value:"sparkles",label:"âœ¨ Sparkles",Icon:h},{value:"building",label:"ðŸ¢ Building",Icon:$},{value:"trees",label:"ðŸŒ³ Trees",Icon:q},{value:"sunset",label:"ðŸŒ… Sunset",Icon:G},{value:"utensils",label:"ðŸ´ Utensils",Icon:R},{value:"car",label:"ðŸš— Parking",Icon:X},{value:"music",label:"ðŸŽµ Music",Icon:Y},{value:"wind",label:"ðŸ’¨ AC",Icon:J}],E=u=>{const n=W.find(t=>t.value===u);return n?n.Icon:h};function le(){const[u,n]=m.useState(!1),[t,o]=m.useState(null),[i,j]=m.useState("grid"),[v,d]=m.useState(null),{showToast:l,ToastContainer:B}=K(),{data:g=[],isLoading:P}=se(),p=ie(),c=re(),O=ne(),y=a=>{o(a),d(a.image_url||null),n(!0)},f=async a=>{if(confirm(`Are you sure you want to delete "${a.title}"?`))try{await O.mutateAsync(a.id),l("success","âœ… Facility deleted successfully")}catch(s){console.error("Delete error:",s),l("error","âŒ Failed to delete facility")}},N=async a=>{try{await c.mutateAsync({id:a.id,data:{is_active:!a.is_active}}),l("success",`âœ… Facility ${a.is_active?"deactivated":"activated"}`)}catch(s){console.error("Toggle error:",s),l("error","âŒ Failed to update status")}},U=async a=>{a.preventDefault();const s=a.currentTarget,r=new FormData(s),k={title:r.get("title"),description:r.get("description"),icon:r.get("icon"),image_url:v,is_active:r.get("status")==="Active"};try{t?(await c.mutateAsync({id:t.id,data:k}),l("success","âœ… Facility updated successfully")):(await p.mutateAsync(k),l("success","âœ… Facility created successfully")),n(!1),o(null),d(null)}catch(H){console.error("Submit error:",H),l("error","âŒ Operation failed")}},w=()=>{o(null),d(null),n(!0)},A=()=>{n(!1),o(null),d(null)};return P?e.jsx(M,{children:e.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"60vh"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(x.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx(F,{className:"mx-auto mb-4",size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Loading facilities..."})]})})}):e.jsxs(M,{children:[e.jsxs("div",{className:"admin-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-page-title",children:"Facilities Management"}),e.jsx("p",{className:"admin-page-description",children:"Manage and update the Dream Avenue facilities displayed on the main website"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center rounded-xl p-1",style:{background:"rgba(0, 255, 65, 0.1)",border:"1px solid rgba(0, 255, 65, 0.2)"},children:[e.jsxs("button",{onClick:()=>j("grid"),className:"px-3 py-2 rounded-lg transition-all flex items-center gap-2",style:{background:i==="grid"?"var(--dream-neon-green)":"transparent",color:i==="grid"?"#1a1a1a":"var(--dream-text-secondary)",fontWeight:i==="grid"?600:400},children:[e.jsx(L,{size:16}),"Grid"]}),e.jsxs("button",{onClick:()=>j("table"),className:"px-3 py-2 rounded-lg transition-all flex items-center gap-2",style:{background:i==="table"?"var(--dream-neon-green)":"transparent",color:i==="table"?"#1a1a1a":"var(--dream-text-secondary)",fontWeight:i==="table"?600:400},children:[e.jsx(V,{size:16}),"Table"]})]}),e.jsxs("button",{onClick:w,className:"admin-btn admin-btn-primary",children:[e.jsx(C,{size:20}),"Add Facility"]})]})]}),i==="grid"&&e.jsx(Q,{columns:"3",children:g.map((a,s)=>{const r=E(a.icon);return e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:s*.04,duration:.4},className:"admin-card group",style:{overflow:"hidden"},children:[a.image_url?e.jsxs("div",{className:"relative w-full mb-4 rounded-xl overflow-hidden",style:{height:"180px",border:"2px solid rgba(0, 255, 65, 0.2)",boxShadow:"0 4px 15px rgba(0, 255, 65, 0.1)"},children:[e.jsx("img",{src:a.image_url,alt:a.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)"},children:e.jsx(b,{size:40,style:{color:"var(--dream-neon-green)"}})})]}):e.jsx("div",{className:"w-full mb-4 rounded-xl flex items-center justify-center",style:{height:"180px",background:"linear-gradient(135deg, rgba(0, 255, 65, 0.1), rgba(224, 192, 151, 0.1))",border:"2px dashed rgba(0, 255, 65, 0.3)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{size:48,style:{color:"var(--dream-text-tertiary)",margin:"0 auto 8px"}}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--dream-text-tertiary)"},children:"No image"})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(0, 255, 65, 0.2), rgba(224, 192, 151, 0.2))",border:"2px solid rgba(0, 255, 65, 0.4)"},children:e.jsx(r,{size:24,style:{color:"var(--dream-neon-green)"}})})}),e.jsx("div",{className:"flex items-center gap-2",children:a.is_active?e.jsx("span",{className:"admin-badge admin-badge-neon",children:"Active"}):e.jsx("span",{className:"admin-badge admin-badge-danger",children:"Hidden"})})]}),e.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"var(--dream-text-primary)"},children:a.title}),e.jsx("p",{className:"mb-4 leading-relaxed line-clamp-2",style:{color:"var(--dream-text-secondary)",fontSize:"0.875rem",minHeight:"40px"},children:a.description||"No description"}),e.jsxs("div",{className:"flex gap-2 pt-4",style:{borderTop:"1px solid rgba(0, 255, 65, 0.2)"},children:[e.jsxs("button",{onClick:()=>N(a),className:"admin-btn admin-btn-sm flex-1 flex items-center justify-center gap-2",style:{background:a.is_active?"rgba(231, 76, 60, 0.1)":"rgba(0, 255, 65, 0.1)",color:a.is_active?"#E74C3C":"var(--dream-neon-green)",border:`1px solid ${a.is_active?"rgba(231, 76, 60, 0.3)":"rgba(0, 255, 65, 0.3)"}`},children:[a.is_active?e.jsx(I,{size:14}):e.jsx(z,{size:14}),a.is_active?"Hide":"Show"]}),e.jsxs("button",{onClick:()=>y(a),className:"admin-btn admin-btn-outline admin-btn-sm flex-1",children:[e.jsx(S,{size:14}),"Edit"]}),e.jsx("button",{onClick:()=>f(a),className:"admin-btn admin-btn-danger admin-btn-sm",style:{minWidth:"44px"},children:e.jsx(_,{size:14})})]})]},a.id)})}),i==="table"&&e.jsx("div",{className:"admin-card",style:{padding:0,overflow:"hidden",border:"1px solid rgba(0, 255, 65, 0.2)"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0, 255, 65, 0.05)"},children:[e.jsx("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Image"}),e.jsx("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Title"}),e.jsx("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Description"}),e.jsx("th",{style:{padding:"16px",textAlign:"center",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Status"}),e.jsx("th",{style:{padding:"16px",textAlign:"right",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Actions"})]})}),e.jsx("tbody",{children:g.map((a,s)=>{const r=E(a.icon);return e.jsxs(x.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:s*.03,duration:.3},style:{borderBottom:"1px solid rgba(0, 255, 65, 0.1)"},children:[e.jsx("td",{style:{padding:"16px"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[a.image_url?e.jsx("img",{src:a.image_url,alt:a.title,className:"rounded-lg object-cover",style:{width:"80px",height:"60px",border:"1px solid rgba(0, 255, 65, 0.2)"}}):e.jsx("div",{className:"rounded-lg flex items-center justify-center",style:{width:"80px",height:"60px",background:"rgba(0, 255, 65, 0.05)",border:"1px dashed rgba(0, 255, 65, 0.3)"},children:e.jsx(b,{size:24,style:{color:"var(--dream-text-tertiary)"}})}),e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(0, 255, 65, 0.2), rgba(224, 192, 151, 0.2))",border:"1px solid rgba(0, 255, 65, 0.3)"},children:e.jsx(r,{size:20,style:{color:"var(--dream-neon-green)"}})})]})}),e.jsx("td",{style:{padding:"16px"},children:e.jsx("div",{style:{fontWeight:600,color:"var(--dream-text-primary)"},children:a.title})}),e.jsx("td",{style:{padding:"16px",maxWidth:"300px"},children:e.jsx("div",{className:"line-clamp-2",style:{color:"var(--dream-text-secondary)",fontSize:"0.875rem"},children:a.description||"No description"})}),e.jsx("td",{style:{padding:"16px",textAlign:"center"},children:a.is_active?e.jsx("span",{className:"admin-badge admin-badge-neon",children:"Active"}):e.jsx("span",{className:"admin-badge admin-badge-danger",children:"Hidden"})}),e.jsx("td",{style:{padding:"16px"},children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>N(a),className:"admin-btn admin-btn-sm",style:{background:a.is_active?"rgba(231, 76, 60, 0.1)":"rgba(0, 255, 65, 0.1)",color:a.is_active?"#E74C3C":"var(--dream-neon-green)",border:`1px solid ${a.is_active?"rgba(231, 76, 60, 0.3)":"rgba(0, 255, 65, 0.3)"}`},children:a.is_active?e.jsx(I,{size:14}):e.jsx(z,{size:14})}),e.jsx("button",{onClick:()=>y(a),className:"admin-btn admin-btn-outline admin-btn-sm",children:e.jsx(S,{size:14})}),e.jsx("button",{onClick:()=>f(a),className:"admin-btn admin-btn-danger admin-btn-sm",children:e.jsx(_,{size:14})})]})})]},a.id)})})]})})}),g.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full mb-6",style:{background:"rgba(0, 255, 65, 0.1)",border:"2px solid rgba(0, 255, 65, 0.3)"},children:e.jsx(h,{size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--dream-text-primary)"},children:"No facilities available"}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Add facilities to showcase your venue's amenities"}),e.jsxs("button",{onClick:w,className:"admin-btn admin-btn-primary mt-6",children:[e.jsx(C,{size:20}),"Add First Facility"]})]}),e.jsx(Z,{isOpen:u,onClose:A,title:t?"Edit Facility":"Add New Facility",children:e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[e.jsx(ee,{label:"Facility Image",value:v,onChange:d,facilityId:t?.id,bucket:"facilities_images",maxSize:5}),e.jsx(ae,{name:"title",label:"Facility Name",placeholder:"e.g., Ample Parking Space",defaultValue:t?.title,required:!0}),e.jsx(te,{name:"description",label:"Description",placeholder:"Describe this facility...",defaultValue:t?.description,required:!0}),e.jsx(T,{name:"icon",label:"Icon",defaultValue:t?.icon||"sparkles",options:W,required:!0}),e.jsx(T,{name:"status",label:"Status",defaultValue:t?.is_active?"Active":t?"Inactive":"Active",options:[{value:"Active",label:"Active - Show on website"},{value:"Inactive",label:"Inactive - Hide from website"}],required:!0}),e.jsxs("div",{className:"flex gap-3 justify-end pt-6 border-t",style:{borderColor:"rgba(0, 255, 65, 0.2)"},children:[e.jsx(D,{type:"button",variant:"outline",onClick:A,children:"Cancel"}),e.jsx(D,{type:"submit",variant:"primary",disabled:p.isPending||c.isPending,children:p.isPending||c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(x.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx(F,{size:16})}),"Saving..."]}):t?"Update Facility":"Add Facility"})]})]})}),B]})}function ye(){return e.jsx(le,{})}export{ye as AdminFacilities};
