import{c as B,r as m,j as e,m as x,S as b}from"./index-BgtLIF6L.js";import{A as F}from"./AdminLayout-CTW1HI_8.js";import{u as O,A as V,P as C,M as $,I as G,F as R,a as I}from"./Toast-bOL5W7LZ.js";import{F as X}from"./FormTextarea-CUM2fpGX.js";import{B as z}from"./Button-CgqdUs4z.js";import{u as J,a as K,b as Q,c as Y,T as Z,U as ee,C as te,M as ae,W as se}from"./useFacilities-CDB2oNHZ.js";import{L as _}from"./loader-circle-Dd0VitYI.js";import{P as M}from"./plus-BuxmFQGL.js";import{I as h}from"./image-Cp5bxKh3.js";import{E as S}from"./eye-off-BHkYNbZJ.js";import{E as T}from"./eye-BTmRme-N.js";import{T as E}from"./trash-2-CLq1pX_V.js";import{B as ie}from"./building-2-DUyhWP1J.js";import{S as re}from"./sunset-C2Kot0cF.js";import"./MobileBottomNav-BLHxEF1a.js";import"./useAuth-BroS41fB.js";import"./logger-DwKo-Kyg.js";import"./chevron-right-C2sZLmp-.js";import"./house-CE1JIjXO.js";import"./check-Ds-CQaI1.js";import"./info-CE_2Kfyg.js";import"./circle-x-CH53C8w-.js";import"./circle-check-big-D8Kqx3Nv.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],le=B("grid-3x3",ne);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],oe=B("list",de),D=[{value:"sparkles",label:"âœ¨ Sparkles",Icon:b},{value:"building",label:"ðŸ¢ Building",Icon:ie},{value:"trees",label:"ðŸŒ³ Trees",Icon:Z},{value:"sunset",label:"ðŸŒ… Sunset",Icon:re},{value:"utensils",label:"ðŸ´ Utensils",Icon:ee},{value:"car",label:"ðŸš— Parking",Icon:te},{value:"music",label:"ðŸŽµ Music",Icon:ae},{value:"wind",label:"ðŸ’¨ AC",Icon:se}],W=p=>{const n=D.find(a=>a.value===p);return n?n.Icon:b};function ce(){const[p,n]=m.useState(!1),[a,o]=m.useState(null),[i,y]=m.useState("grid"),[j,d]=m.useState(null),{showToast:l,ToastContainer:P}=O(),{data:u=[],isLoading:U}=J(),g=K(),c=Q(),L=Y(),v=t=>{o(t),d(t.image_url||null),n(!0)},f=async t=>{if(confirm(`Are you sure you want to delete "${t.title}"?`))try{await L.mutateAsync(t.id),l("success","âœ… Facility deleted successfully")}catch(s){console.error("Delete error:",s),l("error","âŒ Failed to delete facility")}},N=async t=>{try{await c.mutateAsync({id:t.id,data:{is_active:!t.is_active}}),l("success",`âœ… Facility ${t.is_active?"deactivated":"activated"}`)}catch(s){console.error("Toggle error:",s),l("error","âŒ Failed to update status")}},q=async t=>{t.preventDefault();const s=t.currentTarget,r=new FormData(s),A={title:r.get("title"),description:r.get("description"),icon:r.get("icon"),image_url:j,is_active:r.get("status")==="Active"};try{a?(await c.mutateAsync({id:a.id,data:A}),l("success","âœ… Facility updated successfully")):(await g.mutateAsync(A),l("success","âœ… Facility created successfully")),n(!1),o(null),d(null)}catch(H){console.error("Submit error:",H),l("error","âŒ Operation failed")}},k=()=>{o(null),d(null),n(!0)},w=()=>{n(!1),o(null),d(null)};return U?e.jsx(F,{children:e.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"60vh"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(x.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx(_,{className:"mx-auto mb-4",size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Loading facilities..."})]})})}):e.jsxs(F,{children:[e.jsxs("div",{className:"admin-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-page-title",children:"Facilities Management"}),e.jsx("p",{className:"admin-page-description",children:"Manage and update the Dream Avenue facilities displayed on the main website"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center rounded-xl p-1",style:{background:"rgba(0, 255, 65, 0.1)",border:"1px solid rgba(0, 255, 65, 0.2)"},children:[e.jsxs("button",{onClick:()=>y("grid"),className:"px-3 py-2 rounded-lg transition-all flex items-center gap-2",style:{background:i==="grid"?"var(--dream-neon-green)":"transparent",color:i==="grid"?"#1a1a1a":"var(--dream-text-secondary)",fontWeight:i==="grid"?600:400},children:[e.jsx(le,{size:16}),"Grid"]}),e.jsxs("button",{onClick:()=>y("table"),className:"px-3 py-2 rounded-lg transition-all flex items-center gap-2",style:{background:i==="table"?"var(--dream-neon-green)":"transparent",color:i==="table"?"#1a1a1a":"var(--dream-text-secondary)",fontWeight:i==="table"?600:400},children:[e.jsx(oe,{size:16}),"Table"]})]}),e.jsxs("button",{onClick:k,className:"admin-btn admin-btn-primary",children:[e.jsx(M,{size:20}),"Add Facility"]})]})]}),i==="grid"&&e.jsx(V,{columns:"3",children:u.map((t,s)=>{const r=W(t.icon);return e.jsxs(x.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:s*.04,duration:.4},className:"admin-card group",style:{overflow:"hidden"},children:[t.image_url?e.jsxs("div",{className:"relative w-full mb-4 rounded-xl overflow-hidden",style:{height:"180px",border:"2px solid rgba(0, 255, 65, 0.2)",boxShadow:"0 4px 15px rgba(0, 255, 65, 0.1)"},children:[e.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",style:{background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(4px)"},children:e.jsx(h,{size:40,style:{color:"var(--dream-neon-green)"}})})]}):e.jsx("div",{className:"w-full mb-4 rounded-xl flex items-center justify-center",style:{height:"180px",background:"linear-gradient(135deg, rgba(0, 255, 65, 0.1), rgba(224, 192, 151, 0.1))",border:"2px dashed rgba(0, 255, 65, 0.3)"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(h,{size:48,style:{color:"var(--dream-text-tertiary)",margin:"0 auto 8px"}}),e.jsx("p",{style:{fontSize:"0.75rem",color:"var(--dream-text-tertiary)"},children:"No image"})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(0, 255, 65, 0.2), rgba(224, 192, 151, 0.2))",border:"2px solid rgba(0, 255, 65, 0.4)"},children:e.jsx(r,{size:24,style:{color:"var(--dream-neon-green)"}})})}),e.jsx("div",{className:"flex items-center gap-2",children:t.is_active?e.jsx("span",{className:"admin-badge admin-badge-neon",children:"Active"}):e.jsx("span",{className:"admin-badge admin-badge-danger",children:"Hidden"})})]}),e.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"var(--dream-text-primary)"},children:t.title}),e.jsx("p",{className:"mb-4 leading-relaxed line-clamp-2",style:{color:"var(--dream-text-secondary)",fontSize:"0.875rem",minHeight:"40px"},children:t.description||"No description"}),e.jsxs("div",{className:"flex gap-2 pt-4",style:{borderTop:"1px solid rgba(0, 255, 65, 0.2)"},children:[e.jsxs("button",{onClick:()=>N(t),className:"admin-btn admin-btn-sm flex-1 flex items-center justify-center gap-2",style:{background:t.is_active?"rgba(231, 76, 60, 0.1)":"rgba(0, 255, 65, 0.1)",color:t.is_active?"#E74C3C":"var(--dream-neon-green)",border:`1px solid ${t.is_active?"rgba(231, 76, 60, 0.3)":"rgba(0, 255, 65, 0.3)"}`},children:[t.is_active?e.jsx(S,{size:14}):e.jsx(T,{size:14}),t.is_active?"Hide":"Show"]}),e.jsxs("button",{onClick:()=>v(t),className:"admin-btn admin-btn-outline admin-btn-sm flex-1",children:[e.jsx(C,{size:14}),"Edit"]}),e.jsx("button",{onClick:()=>f(t),className:"admin-btn admin-btn-danger admin-btn-sm",style:{minWidth:"44px"},children:e.jsx(E,{size:14})})]})]},t.id)})}),i==="table"&&e.jsx("div",{className:"admin-card",style:{padding:0,overflow:"hidden",border:"1px solid rgba(0, 255, 65, 0.2)"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(0, 255, 65, 0.05)"},children:[e.jsx("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Image"}),e.jsx("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Title"}),e.jsx("th",{style:{padding:"16px",textAlign:"left",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Description"}),e.jsx("th",{style:{padding:"16px",textAlign:"center",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Status"}),e.jsx("th",{style:{padding:"16px",textAlign:"right",borderBottom:"1px solid rgba(0, 255, 65, 0.2)",color:"var(--dream-text-primary)",fontWeight:600},children:"Actions"})]})}),e.jsx("tbody",{children:u.map((t,s)=>{const r=W(t.icon);return e.jsxs(x.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:s*.03,duration:.3},style:{borderBottom:"1px solid rgba(0, 255, 65, 0.1)"},children:[e.jsx("td",{style:{padding:"16px"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[t.image_url?e.jsx("img",{src:t.image_url,alt:t.title,className:"rounded-lg object-cover",style:{width:"80px",height:"60px",border:"1px solid rgba(0, 255, 65, 0.2)"}}):e.jsx("div",{className:"rounded-lg flex items-center justify-center",style:{width:"80px",height:"60px",background:"rgba(0, 255, 65, 0.05)",border:"1px dashed rgba(0, 255, 65, 0.3)"},children:e.jsx(h,{size:24,style:{color:"var(--dream-text-tertiary)"}})}),e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(0, 255, 65, 0.2), rgba(224, 192, 151, 0.2))",border:"1px solid rgba(0, 255, 65, 0.3)"},children:e.jsx(r,{size:20,style:{color:"var(--dream-neon-green)"}})})]})}),e.jsx("td",{style:{padding:"16px"},children:e.jsx("div",{style:{fontWeight:600,color:"var(--dream-text-primary)"},children:t.title})}),e.jsx("td",{style:{padding:"16px",maxWidth:"300px"},children:e.jsx("div",{className:"line-clamp-2",style:{color:"var(--dream-text-secondary)",fontSize:"0.875rem"},children:t.description||"No description"})}),e.jsx("td",{style:{padding:"16px",textAlign:"center"},children:t.is_active?e.jsx("span",{className:"admin-badge admin-badge-neon",children:"Active"}):e.jsx("span",{className:"admin-badge admin-badge-danger",children:"Hidden"})}),e.jsx("td",{style:{padding:"16px"},children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>N(t),className:"admin-btn admin-btn-sm",style:{background:t.is_active?"rgba(231, 76, 60, 0.1)":"rgba(0, 255, 65, 0.1)",color:t.is_active?"#E74C3C":"var(--dream-neon-green)",border:`1px solid ${t.is_active?"rgba(231, 76, 60, 0.3)":"rgba(0, 255, 65, 0.3)"}`},children:t.is_active?e.jsx(S,{size:14}):e.jsx(T,{size:14})}),e.jsx("button",{onClick:()=>v(t),className:"admin-btn admin-btn-outline admin-btn-sm",children:e.jsx(C,{size:14})}),e.jsx("button",{onClick:()=>f(t),className:"admin-btn admin-btn-danger admin-btn-sm",children:e.jsx(E,{size:14})})]})})]},t.id)})})]})})}),u.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full mb-6",style:{background:"rgba(0, 255, 65, 0.1)",border:"2px solid rgba(0, 255, 65, 0.3)"},children:e.jsx(b,{size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--dream-text-primary)"},children:"No facilities available"}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Add facilities to showcase your venue's amenities"}),e.jsxs("button",{onClick:k,className:"admin-btn admin-btn-primary mt-6",children:[e.jsx(M,{size:20}),"Add First Facility"]})]}),e.jsx($,{isOpen:p,onClose:w,title:a?"Edit Facility":"Add New Facility",children:e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsx(G,{label:"Facility Image",value:j,onChange:d,facilityId:a?.id,bucket:"facilities_images",maxSize:5}),e.jsx(R,{name:"title",label:"Facility Name",placeholder:"e.g., Ample Parking Space",defaultValue:a?.title,required:!0}),e.jsx(X,{name:"description",label:"Description",placeholder:"Describe this facility...",defaultValue:a?.description,required:!0}),e.jsx(I,{name:"icon",label:"Icon",defaultValue:a?.icon||"sparkles",options:D,required:!0}),e.jsx(I,{name:"status",label:"Status",defaultValue:a?.is_active?"Active":a?"Inactive":"Active",options:[{value:"Active",label:"Active - Show on website"},{value:"Inactive",label:"Inactive - Hide from website"}],required:!0}),e.jsxs("div",{className:"flex gap-3 justify-end pt-6 border-t",style:{borderColor:"rgba(0, 255, 65, 0.2)"},children:[e.jsx(z,{type:"button",variant:"outline",onClick:w,children:"Cancel"}),e.jsx(z,{type:"submit",variant:"primary",disabled:g.isPending||c.isPending,children:g.isPending||c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(x.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx(_,{size:16})}),"Saving..."]}):a?"Update Facility":"Add Facility"})]})]})}),P]})}function Ee(){return e.jsx(ce,{})}export{Ee as AdminFacilities};
