import{j as e,L as D,O as h,R as O,V as F,a0 as U}from"./vendor-ui-Bvf1z7Qk.js";import{b as m}from"./vendor-react-DmQ-wajQ.js";import{A as b}from"./AdminLayout-3i5P8tIF.js";import{u as z,A as T,M as L,F as _,a as R,I as B}from"./Toast-BGWb8XWp.js";import{B as v}from"./Button-B61ojvht.js";import{u as P,a as V,b as $,c as q}from"./useGallery-Bh8IWpCJ.js";import{m as j}from"./index-DCvhesIs.js";import"./MobileBottomNav-B5hhplxL.js";import"./useAuth-BHPREJkW.js";import"./logger-DwKo-Kyg.js";import"./vendor-motion-DcNBMtCR.js";const f=[{value:"weddings",label:"Weddings"},{value:"corporate",label:"Corporate Events"},{value:"birthdays",label:"Birthdays"},{value:"receptions",label:"Receptions"},{value:"conferences",label:"Conferences"},{value:"other",label:"Other"}];function H(){const[N,n]=m.useState(!1),[r,i]=m.useState(null),[o,g]=m.useState("all"),[u,s]=m.useState(""),{showToast:l,ToastContainer:I}=z(),{data:d=[],isLoading:w}=P(),C=V(),A=$(),k=q(),G=a=>{i(a),s(a.image_url),n(!0)},M=async a=>{if(confirm(`Are you sure you want to delete "${a.title||"this image"}"?`))try{await k.mutateAsync(a.id),l("success","Image deleted successfully")}catch(t){console.error("Delete error:",t),l("error","Failed to delete image")}},E=async a=>{a.preventDefault();const t=a.currentTarget,c=new FormData(t),p={title:c.get("title"),category:c.get("category"),image_url:u};if(!u){l("error","Please upload an image");return}try{r?(await A.mutateAsync({id:r.id,data:p}),l("success","Image updated successfully")):(await C.mutateAsync(p),l("success","Image added successfully")),n(!1),i(null),s("")}catch(S){console.error("Submit error:",S),l("error","Operation failed")}},y=()=>{i(null),s(""),n(!0)},x=o==="all"?d:d.filter(a=>a.category===o);return w?e.jsx(b,{children:e.jsx("div",{className:"flex items-center justify-center",style:{minHeight:"60vh"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(j.div,{animate:{rotate:[0,360]},transition:{duration:1,repeat:1/0,ease:"linear"},style:{display:"inline-block"},children:e.jsx(D,{className:"mx-auto mb-4",size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Loading gallery..."})]})})}):e.jsxs(b,{children:[e.jsxs("div",{className:"admin-page-header",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-page-title",children:"Gallery Management"}),e.jsx("p",{className:"admin-page-description",children:"Manage your venue's photo gallery across different event categories"})]}),e.jsxs("button",{onClick:y,className:"admin-btn admin-btn-primary",children:[e.jsx(h,{size:20}),"Add Image"]})]}),e.jsxs("div",{className:"flex gap-3 flex-wrap mb-8",children:[e.jsxs("button",{onClick:()=>g("all"),className:`px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 ${o==="all"?"bg-gradient-neon text-[var(--dream-dark-bg)] shadow-lg border-glow":"bg-[var(--dream-dark-secondary)] text-[var(--dream-text-secondary)] border border-[rgba(0,255,65,0.2)] hover:border-[var(--dream-neon-green)] hover:text-[var(--dream-neon-green)]"}`,children:["All ",e.jsxs("span",{className:"opacity-75",children:["(",d.length,")"]})]}),f.map(a=>{const t=d.filter(c=>c.category===a.value).length;return e.jsxs("button",{onClick:()=>g(a.value),className:`px-5 py-2.5 rounded-xl font-semibold transition-all duration-300 ${o===a.value?"bg-gradient-neon text-[var(--dream-dark-bg)] shadow-lg border-glow":"bg-[var(--dream-dark-secondary)] text-[var(--dream-text-secondary)] border border-[rgba(0,255,65,0.2)] hover:border-[var(--dream-neon-green)] hover:text-[var(--dream-neon-green)]"}`,children:[a.label," ",e.jsxs("span",{className:"opacity-75",children:["(",t,")"]})]},a.value)})]}),e.jsx(T,{columns:"3",children:x.map((a,t)=>e.jsxs(j.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:t*.04,duration:.4},className:"gallery-item",children:[e.jsxs("div",{className:"relative h-60 overflow-hidden",children:[e.jsx("img",{src:a.image_url,alt:a.title||"Gallery image",className:"gallery-item-image"}),e.jsxs("div",{className:"gallery-item-overlay",children:[e.jsxs("button",{onClick:()=>G(a),className:"admin-btn admin-btn-primary admin-btn-sm",children:[e.jsx(O,{size:16}),"Edit"]}),e.jsxs("button",{onClick:()=>M(a),className:"admin-btn admin-btn-danger admin-btn-sm",children:[e.jsx(F,{size:16}),"Delete"]})]})]}),e.jsxs("div",{className:"gallery-item-info",children:[e.jsx("h4",{className:"gallery-item-title",children:a.title||"Untitled"}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx("span",{className:"gallery-item-category",children:a.category}),a.display_order&&e.jsxs("span",{className:"text-xs",style:{color:"var(--dream-text-muted)"},children:["Order: ",a.display_order]})]})]})]},a.id))}),x.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full mb-6",style:{background:"rgba(0, 255, 65, 0.1)",border:"2px solid rgba(0, 255, 65, 0.3)"},children:e.jsx(U,{size:48,style:{color:"var(--dream-neon-green)"}})}),e.jsx("h3",{className:"text-xl font-semibold mb-2",style:{color:"var(--dream-text-primary)"},children:"No images in this category"}),e.jsx("p",{style:{color:"var(--dream-text-secondary)"},children:"Add images to showcase your venue"}),e.jsxs("button",{onClick:y,className:"admin-btn admin-btn-primary mt-6",children:[e.jsx(h,{size:20}),"Add First Image"]})]}),e.jsx(L,{isOpen:N,onClose:()=>{n(!1),i(null),s("")},title:r?"Edit Gallery Image":"Add New Gallery Image",children:e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[e.jsx(_,{name:"title",label:"Image Title",placeholder:"e.g., Elegant Wedding Reception Hall",defaultValue:r?.title,required:!0}),e.jsx(R,{name:"category",label:"Event Category",defaultValue:r?.category||"weddings",options:f,required:!0}),e.jsx(B,{label:"Upload Image",value:u,onChange:s}),e.jsxs("div",{className:"flex gap-3 justify-end pt-6 border-t",style:{borderColor:"rgba(0, 255, 65, 0.2)"},children:[e.jsx(v,{type:"button",variant:"outline",onClick:()=>{n(!1),i(null),s("")},children:"Cancel"}),e.jsx(v,{type:"submit",variant:"primary",children:r?"Update Image":"Add Image"})]})]})}),I]})}function se(){return e.jsx(H,{})}export{se as AdminGallery};
