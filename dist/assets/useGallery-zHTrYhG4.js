import{o as y,e as l,D as d,s as o,g as m,f as u,q as c,t as s}from"./index-BgtLIF6L.js";const n=y({id:l().uuid().optional(),title:l().min(1,"Title is required"),image_url:l().url("Valid image URL is required"),category:l().optional().nullable(),description:l().optional().nullable(),event_type:l().optional().nullable(),is_featured:d().optional().default(!1),created_at:l().optional(),updated_at:l().optional()}),g=n.omit({id:!0,created_at:!0,updated_at:!0});g.partial();const p=async a=>{let e=o.from("gallery").select("*").order("created_at",{ascending:!1});a&&(e=e.eq("category",a));const{data:t,error:i}=await e;if(i)throw new Error(i.message);return n.array().parse(t||[])},f=async a=>{const{data:e,error:t}=await o.from("gallery").insert([a]).select().single();if(t)throw new Error(t.message);return n.parse(e)},q=async(a,e)=>{const{data:t,error:i}=await o.from("gallery").update(e).eq("id",a).select().single();if(i)throw new Error(i.message);return n.parse(t)},w=async a=>{const{error:e}=await o.from("gallery").delete().eq("id",a);if(e)throw new Error(e.message)},r={all:["gallery"],lists:()=>[...r.all,"list"],list:a=>[...r.lists(),a],details:()=>[...r.all,"detail"],detail:a=>[...r.details(),a]},_=a=>m({queryKey:r.list({category:a}),queryFn:()=>p(a)}),I=()=>{const a=u();return c({mutationFn:e=>f(e),onSuccess:()=>{a.invalidateQueries({queryKey:r.all}),s.success("Gallery item created successfully")},onError:e=>{s.error(e.message||"Failed to create gallery item")}})},b=()=>{const a=u();return c({mutationFn:({id:e,data:t})=>q(e,t),onSuccess:(e,t)=>{a.invalidateQueries({queryKey:r.all}),a.invalidateQueries({queryKey:r.detail(t.id)}),s.success("Gallery item updated successfully")},onError:e=>{s.error(e.message||"Failed to update gallery item")}})},E=()=>{const a=u();return c({mutationFn:e=>w(e),onSuccess:()=>{a.invalidateQueries({queryKey:r.all}),s.success("Gallery item deleted successfully")},onError:e=>{s.error(e.message||"Failed to delete gallery item")}})};export{I as a,b,E as c,_ as u};
